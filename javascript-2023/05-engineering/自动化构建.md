# 自动化构建

解决开发过程中重复的工作

## 常见的自动化构建工具

- grunt: 最早的前端自动化构建工具，生态比较完善；但是基于磁盘，会发生较多的文件读写操作，比较慢
- gulp: 基于内存，速度比较快；而且支持多任务执行；

## gulp

### 基本使用

先在项目中安装 `gulp`

```bash
pnpm add gulp -D
```

创建入口文件 `gulpfile.js`

```js
// gulp 入口文件

// 定义一个叫foo的任务
exports.foo = done => {
  console.log('foo')
  done() // 标识任务完成
}

// 定义一个默认任务
exports.default = (done) => {
  console.log('default')
  done()
}
```

执行 `gulp` 任务

```bash
# 执行 foo 任务
npx gulp foo
# 执行默认任务
npx gulp
```

### 组合任务

将多个任务组合起来执行，可以是**同步（series）**或**异步（parallel）**执行

```js
const { series, parallel } = require("gulp")

const task1 = done => {
  setTimeout(() => {
    console.log('task1')
    done()
  }, 1000)
}

const task2 = done => {
  setTimeout(() => {
    console.log('task2')
    done()
  }, 1000)
}

const task3 = done => {
  setTimeout(() => {
    console.log('task3')
    done()
  }, 1000)
}

// 将上面的任务组合起来同步执行
exports.foo = series(task1, task2, task3)

// 异步执行
exports.bar = parallel(task1, task2, task3)

```
